import{u as P,a as L,r as a,j as e,L as k,b as M,B as R}from"./index-BW9J8XDZ.js";import{C as T}from"./Toast-B3EGjjVm.js";import{i as F}from"./auth.utility-BSlGJMKu.js";import{B as q}from"./Button-DwHs9q8a.js";import"./ThemeProvider-CkxvoxuK.js";import"./useTimeout-C4AjoZ0W.js";import"./TransitionWrapper-C8SpBI9G.js";import"./useEventCallback-Duh4GctK.js";import"./Button-2RoaZ0va.js";function H(){document.title="CPMS | Student Login";const n=P(),h=L(),[c,m]=a.useState(!1),[t,r]=a.useState({});a.useEffect(()=>{F()&&n("../student/dashboard")},[n]);const[w,i]=a.useState(!1),[j,u]=a.useState(""),[s,y]=a.useState({email:"",password:""}),{email:b,password:N}=s,p=l=>{if(y({...s,[l.target.name]:l.target.value}),l.target.name==="email")return r({...t,email:""});if(l.target.name==="password")return r({...t,password:""})},v=async l=>{var f,g;if(l.preventDefault(),!(s!=null&&s.email)&&!(s!=null&&s.password))return r({email:"Email Required!",password:"Password Required!"});if(!(s!=null&&s.email))return r({email:"Email Required!"});if(!(s!=null&&s.password))return r({password:"Password Required!"});m(!0);try{const o=await M.post(`${R}/student/login`,s);localStorage.setItem("token",o.data.token),n("../student/dashboard")}catch(o){(g=(f=o==null?void 0:o.response)==null?void 0:f.data)!=null&&g.msg&&(u(o.response.data.msg),i(!0)),console.log("Error in Student login.jsx => ",o),m(!1)}},{showToastPass:x,toastMessagePass:E}=h.state||{showToastPass:!1,toastMessagePass:""};a.useEffect(()=>{x&&(u(E),i(x),n(".",{replace:!0,state:{}}))},[]);const[d,S]=a.useState(!1),C=()=>{S(!d)};return e.jsxs(e.Fragment,{children:[e.jsx(T,{show:w,onClose:()=>i(!1),message:j,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-r from-indigo-400 from-10% via-sky-300 via-40% to-emerald-500 to-100% ",children:e.jsxs("form",{className:"form-signin flex justify-center items-center flex-col gap-3 backdrop-blur-md bg-white/30 border border-white/20 rounded-lg p-8 shadow shadow-red-400 w-1/3 max-lg:w-2/3 max-md:w-3/4 max-[400px]:w-4/5",onSubmit:v,children:[e.jsxs("div",{className:"flex justify-center items-center flex-col",children:[e.jsx("img",{className:"mb-4 rounded-xl shadow w-30 h-28 lg:w-40 lg:h-40",src:`${k}`,alt:"Logo Image"}),e.jsx("h1",{className:"h3 mb-3 font-weight-normal",children:"Please Log In"})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full",children:[e.jsx("label",{htmlFor:"inputEmail",className:"sr-only",children:"Email address"}),e.jsx("input",{type:"email",id:"inputEmail",className:"form-control ml-1",placeholder:"Email address",autoFocus:"",fdprocessedid:"gwlj3s",autoComplete:"email",name:"email",value:b,onChange:p}),e.jsx("div",{className:"text-red-500 ml-2 text-left",children:t==null?void 0:t.email})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-center items-center w-full",children:[e.jsx("label",{htmlFor:"inputPassword",className:"sr-only",children:"Password"}),e.jsx("input",{type:`${d?"text":"password"}`,id:"inputPassword",className:"form-control",placeholder:"Password",fdprocessedid:"9sysne",autoComplete:"current-password",name:"password",value:N,onChange:p}),e.jsx("i",{className:`${d?"fa-solid fa-eye":"fa-regular fa-eye-slash"} -ml-6 cursor-pointer`,onClick:C})]}),e.jsx("div",{className:"text-red-500 text-left ml-2",children:t==null?void 0:t.password})]}),e.jsx("div",{className:"flex justify-center items-center flex-col",children:e.jsx(q,{type:"submit",variant:"primary",disabled:c,children:c?"Loading...":"Log In"})}),e.jsxs("span",{className:"text-center",children:["Don't have an account?",e.jsx("span",{className:"text-blue-500 font-bold cursor-pointer px-1",onClick:()=>n("../student/signup"),children:"Create new account"})]}),e.jsx("p",{className:"text-muted text-center text-gray-400",children:"Â© College Placement Management System 2024 - 25"})]})})]})}export{H as default};
