const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SidebarData-CGwKkSf-.js","assets/index-BW9J8XDZ.js","assets/index-CZY1Tqhd.css","assets/index-1TJ_vit0.js","assets/iconBase-URH_NpeO.js","assets/index-Dx9S4Tnx.js","assets/index-CJ7obRJ8.js","assets/index-BgyV-MeX.js","assets/index-K0BZtk2v.js","assets/SidebarData-Bk07wiV8.js","assets/SidebarData-Dgi1aiYA.js","assets/index-BY9Ksho_.js","assets/SidebarData-DFhxQgJv.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,c as d,a as w,u as y,b as k,B as L,L as E,_ as h}from"./index-BW9J8XDZ.js";import{a as f,b as P}from"./index-1TJ_vit0.js";import{G as A}from"./iconBase-URH_NpeO.js";function $(a){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 256c0 114.9 93.1 208 208 208s208-93.1 208-208S370.9 48 256 48 48 141.1 48 256zm289.1-43.4c7.5-7.5 19.8-7.5 27.3 0 3.8 3.8 5.6 8.7 5.6 13.6s-1.9 9.9-5.7 13.7l-94.3 94c-7.6 6.9-19.3 6.7-26.6-.6l-95.7-95.4c-7.5-7.5-7.6-19.7 0-27.3 7.5-7.5 19.7-7.6 27.3 0l81.1 81.9 81-79.9z"},child:[]}]})(a)}const C=({to:a,onClick:r,active:o,children:u,hasSubnav:l})=>e.jsx(d,{to:a,onClick:r,className:`flex items-center justify-between w-full px-3 h-14 text-black text-lg no-underline hover:bg-slate-300 hover:border-l-4 hover:border-blue-500 ${l?"":"hover:bg-slate-300 hover:border-l-4 hover:border-blue-500"} ${o?"bg-slate-300 border-l-4 border-blue-500":"bg-transparent"}`,children:u}),j=({children:a})=>e.jsx("span",{className:"ml-3",children:a}),I=({to:a,active:r,children:o})=>e.jsx(d,{to:a,className:`flex items-center h-12 pl-8 text-black text-lg no-underline hover:bg-slate-300 hover:border-l-4 hover:border-blue-500 ${r?"bg-slate-300 border-l-4 border-blue-500":"bg-transparent"}`,children:o}),O=({item:a,currentPath:r})=>{const[o,u]=i.useState(!1);i.useEffect(()=>{a.subNav&&a.subNav.some(c=>r.includes(c.path))?u(!0):u(!1)},[r,a.subNav]);const l=()=>u(!o);return e.jsxs(e.Fragment,{children:[e.jsxs(C,{to:a.path,onClick:a.subNav&&l,active:r===a.path,hasSubnav:!!a.subNav,children:[e.jsxs("div",{className:"flex items-center",children:[a.icon,e.jsx(j,{children:a.title})]}),e.jsx("div",{children:a.subNav&&o?a.iconOpened:a.subNav?a.iconClosed:null})]}),o&&e.jsx("div",{className:"bg-gray-200",children:a.subNav.map((c,t)=>e.jsxs(I,{to:c.path,active:r===c.path,children:[c.icon,e.jsx(j,{children:c.title})]},t))})]})},T=({isSidebarVisible:a})=>{const[r,o]=i.useState(a),u=w(),l=y();i.useEffect(()=>{o(a)},[a]);const c=()=>{localStorage.removeItem("token"),t.role==="student"?l("../student/login"):t.role==="tpo_admin"?l("../tpo/login"):t.role==="management_admin"?l("../management/login"):t.role==="superuser"&&l("../admin")},[t,N]=i.useState({name:"Not Found",email:"Not Found",profile:"Profile Img",role:""});i.useEffect(()=>{const n=localStorage.getItem("token");k.get(`${L}/user/detail`,{headers:{Authorization:`Bearer ${n}`}}).then(s=>{var x,g,v;N({name:`${(x=s.data)==null?void 0:x.first_name} ${(g=s.data)==null?void 0:g.middle_name} ${(v=s.data)==null?void 0:v.last_name}`,email:s.data.email,profile:s.data.profile,role:s.data.role})}).catch(s=>{if(s.response&&s.response.status===401){const x={showToastPass:!0,toastMessagePass:s.response.data.msg};l("../",{state:x})}})},[l]);const[m,S]=i.useState(!1),[p,b]=i.useState([]),D=()=>{S(!m)},_=async()=>{if(t.role==="superuser"){const{SidebarData:n}=await h(async()=>{const{SidebarData:s}=await import("./SidebarData-CGwKkSf-.js");return{SidebarData:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8]));b(n)}else if(t.role==="management_admin"){const{SidebarData:n}=await h(async()=>{const{SidebarData:s}=await import("./SidebarData-Bk07wiV8.js");return{SidebarData:s}},__vite__mapDeps([9,1,2,3,4,5,7,8,6]));b(n)}else if(t.role==="tpo_admin"){const{SidebarData:n}=await h(async()=>{const{SidebarData:s}=await import("./SidebarData-Dgi1aiYA.js");return{SidebarData:s}},__vite__mapDeps([10,1,2,3,4,5,7,8,11]));b(n)}else if(t.role==="student"){const{SidebarData:n}=await h(async()=>{const{SidebarData:s}=await import("./SidebarData-DFhxQgJv.js");return{SidebarData:s}},__vite__mapDeps([12,1,2,5,4,7,11]));b(n)}};return i.useEffect(()=>{t.role&&_()},[t.role]),e.jsx(e.Fragment,{children:e.jsxs("nav",{className:`bg-[#f2f2f2] w-[240px] min-h-screen h-full z-20 flex flex-col fixed top-0 transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"} shadow-md navbar-container lg:w-[260px]`,children:[e.jsxs("div",{className:"flex items-center px-4 py-6 gap-3 bg-blue-50",children:[e.jsx("img",{className:"rounded-xl shadow-md",src:E,alt:"Logo Image",width:"75",height:"75"}),e.jsxs("h1",{className:"text-2xl font-bold text-white",children:[t.role==="superuser"&&e.jsx(d,{to:"/admin/dashboard",className:"no-underline text-black",children:"CPMS"}),t.role==="management_admin"&&e.jsx(d,{to:"/management/dashboard",className:"no-underline text-black",children:"CPMS"}),t.role==="tpo_admin"&&e.jsx(d,{to:"/tpo/dashboard",className:"no-underline text-black",children:"CPMS"}),t.role==="student"&&e.jsx(d,{to:"/student/dashboard",className:"no-underline text-black",children:"CPMS"})]})]}),e.jsx("div",{className:"flex-grow overflow-y-auto sidebar-content pb-24",children:e.jsx("div",{className:"flex flex-col justify-center w-full",children:p.length>0?p.map((n,s)=>e.jsx(O,{item:n,currentPath:u.pathname},s)):e.jsx("p",{className:"text-center text-gray-600",children:"Loading..."})})}),e.jsxs("div",{className:"bottom-0 absolute w-full transition-all duration-300",children:[m&&e.jsxs("div",{className:`w-full rounded-t-md bg-blue-200 ${m?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-5"}`,children:[t.role==="student"&&e.jsxs(d,{to:"../student/account",className:"flex items-center rounded-t-md no-underline text-black p-3 hover:bg-blue-300",children:[e.jsx(f,{className:"mr-2"})," ",e.jsx("span",{children:"Account Details"})]}),t.role==="tpo_admin"&&e.jsxs(d,{to:"../tpo/account",className:"flex items-center rounded-t-md no-underline text-black p-3 hover:bg-blue-300",children:[e.jsx(f,{className:"mr-2"})," ",e.jsx("span",{children:"Account Details"})]}),t.role==="management_admin"&&e.jsxs(d,{to:"../management/account",className:"flex items-center rounded-t-md no-underline text-black p-3 hover:bg-blue-300",children:[e.jsx(f,{className:"mr-2"})," ",e.jsx("span",{children:"Account Details"})]}),e.jsxs("button",{onClick:c,className:"flex items-center rounded-t-md w-full p-3 text-red-700 hover:bg-blue-300",children:[e.jsx(P,{className:"mr-2"})," Logout"]})]}),e.jsxs("div",{className:"flex justify-center items-center cursor-pointer bg-blue-100",onClick:D,children:[e.jsx("img",{src:t.profile,alt:"Profile Img",width:"45px",className:"mx-2 my-2 rounded-2xl transition-all duration-300 shadow-md"}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col justify-center py-1",children:[e.jsx("h2",{className:"text-base font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.email})]})}),e.jsx("div",{className:"px-1",children:e.jsx($,{size:24,className:`transition-transform duration-300 ${m?"rotate-180":"rotate-0"}`})})]})]})]})})};export{T as default};
