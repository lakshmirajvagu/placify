import{u as I,r as t,d as $,j as e,b,B as m}from"./index-BW9J8XDZ.js";import{B}from"./Button-DwHs9q8a.js";import{a as l,F as i}from"./Form-B79OQcrp.js";import{C as P}from"./Toast-B3EGjjVm.js";import{M as T}from"./Modal-C3czwkNW.js";import"./ThemeProvider-CkxvoxuK.js";import"./Button-2RoaZ0va.js";import"./useTimeout-C4AjoZ0W.js";import"./TransitionWrapper-C8SpBI9G.js";import"./Col-ybKDMb82.js";import"./useEventCallback-Duh4GctK.js";import"./hasClass-Cxr2nBO8.js";function Q(){document.title="CPMS | Add Company";const N=I(),[v,p]=t.useState(!0),[d,x]=t.useState(""),{companyId:n}=$(),[D,y]=t.useState(!1),[w,h]=t.useState(""),[S,r]=t.useState(!1),[a,f]=t.useState(),F=()=>{r(!1)},L=o=>{if(o.preventDefault(),!(a!=null&&a.companyName)||!(a!=null&&a.companyDescription)||!(a!=null&&a.companyDifficulty)||!(a!=null&&a.companyLocation)||!(a!=null&&a.companyWebsite))return x("All Fields Required!");r(!0)},M=async()=>{var u,g,j,C;const o=n?`${m}/company/update-company?companyId=${n}`:`${m}/company/add-company`;try{const s=await b.post(o,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if((s==null?void 0:s.status)===201){r(!1),h((u=s==null?void 0:s.data)==null?void 0:u.msg);const E={showToastPass:!0,toastMessagePass:(g=s==null?void 0:s.data)==null?void 0:g.msg};N("../tpo/companys",{state:E})}}catch(s){console.log("AddCompany error while fetching => ",s),r(!1),h((C=(j=s==null?void 0:s.response)==null?void 0:j.data)==null?void 0:C.msg),y(!0)}},A=async()=>{try{const o=await b.get(`${m}/company/company-data?companyId=${n}`);f(o.data.company)}catch(o){console.log("AddCompany error while fetching => ",o)}finally{p(!1)}};t.useEffect(()=>{n&&A()},[n]),t.useEffect(()=>{n||p(!1)},[]);const c=o=>{x(""),f({...a,[o.target.name]:o.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(P,{show:D,onClose:()=>y(!1),message:w,delay:3e3,position:"bottom-end"}),v?e.jsx("div",{className:"flex justify-center h-72 items-center",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl"})}):e.jsx(e.Fragment,{children:e.jsxs(l,{onSubmit:L,children:[e.jsxs("div",{className:"my-8 text-base backdrop-blur-md bg-white/30 border border-white/20 rounded-lg shadow shadow-red-400 p-6 max-sm:text-sm max-sm:p-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-sm:grid-cols-1",children:[e.jsx(i,{controlId:"floatingCompanyName",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"text",placeholder:"Company Name",name:"companyName",value:(a==null?void 0:a.companyName)||"",onChange:c})}),e.jsx(i,{controlId:"floatingCompanyLocation",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Location ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"text",placeholder:"Company Location",name:"companyLocation",value:(a==null?void 0:a.companyLocation)||"",onChange:c})})]}),e.jsx(i,{controlId:"floatingCompanyWebsite",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Website ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"link",placeholder:"Company Website",name:"companyWebsite",value:(a==null?void 0:a.companyWebsite)||"",onChange:c})}),e.jsx(i,{controlId:"floatingSelectDifficulty",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Difficulty Level ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsxs(l.Select,{"aria-label":"Floating label select difficulty",className:"cursor-pointer",name:"companyDifficulty",value:(a==null?void 0:a.companyDifficulty)||"",onChange:c,children:[e.jsx("option",{disabled:!0,value:"",className:"text-gray-400",children:"Enter Difficulty Level"}),e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Hard",children:"Hard"})]})}),e.jsx(i,{controlId:"floatingcompanyDescription",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Description ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{as:"textarea",placeholder:"Company Description",name:"companyDescription",style:{height:"100px",maxHeight:"450px"},value:(a==null?void 0:a.companyDescription)||"",onChange:c})})]}),d&&e.jsx("div",{className:"flex pt-2",children:e.jsx("span",{className:"text-red-500",children:d})})]}),e.jsx("div",{className:"flex flex-col justify-center items-center gap-2",children:e.jsx(B,{variant:"primary",type:"submit",size:"lg",children:n?"Update Company":"Add Company"})})]})}),e.jsx(T,{show:S,close:F,header:"Confirmation",body:`Do you want to add company ${a==null?void 0:a.companyName}?`,btn:"Post",confirmAction:M})]})}export{Q as default};
