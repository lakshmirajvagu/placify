import{r as i,b as d,B as m,j as a,c as h}from"./index-BW9J8XDZ.js";function N(){const[x,f]=i.useState(!0),[n,p]=i.useState([]),[t,g]=i.useState({});i.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("token"),e=await d.get(`${m}/user/detail`,{headers:{Authorization:`Bearer ${r}`}});g({role:e.data.role})}catch(r){console.log("Error fetching user details => ",r)}})()},[]),i.useEffect(()=>{u()},[t==null?void 0:t.role]);const u=async()=>{var s;try{const r=await d.get(`${m}/student/notify-interview-hired`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),o=((s=r==null?void 0:r.data)==null?void 0:s.studentsWithJobDetails).map(l=>({id:l._id,studentName:l.name,department:l.department,year:l.year,jobs:l.jobs.filter(c=>c.status==="interview"||c.status==="hired")})).filter(l=>l.jobs.length>0);p(o)}catch(r){console.log("Error while fetching updates notification: ",r)}finally{f(!1)}};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"my-2 mx-2 w-full backdrop-blur-md bg-white/30 border border-white/20 rounded-lg py-2 px-3 shadow shadow-red-400",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsx("h3",{className:"font-semibold my-2",children:"Notification"})}),x?a.jsx("div",{className:"flex justify-center items-center",children:a.jsx("i",{className:"fa-solid fa-spinner fa-spin text-2xl"})}):a.jsx("div",{className:"relative h-72 overflow-hidden",children:a.jsx("div",{className:"absolute bottom-0 w-full flex flex-col gap-2 h-full animate-scrollUp",children:(n==null?void 0:n.length)>0?n.map((s,r)=>a.jsx(h,{className:"no-underline text-blue-500 hover:text-blue-700",to:(t==null?void 0:t.role)==="tpo_admin"?`/tpo/user/${s.id}`:(t==null?void 0:t.role)==="management_admin"&&`/management/user/${s.id}`,target:"_blank",children:a.jsxs("div",{className:"p-2 h-fit rounded bg-yellow-200 border-2 border-black transition-all duration-200 ease-in-out hover:bg-yellow-300",children:[a.jsxs("span",{className:"text-2xl text-black",children:[s.studentName," from",a.jsxs("b",{children:[s.year===1&&" First Year ",s.year===2&&" Second Year ",s.year===3&&" Third Year ",s.year===4&&" Fourth Year "]}),s.department]}),a.jsx("div",{className:"flex flex-col gap-0.5",children:s.jobs.map((e,o)=>a.jsx(h,{className:"text-blue-500 no-underline hover:text-blue-700",to:(t==null?void 0:t.role)==="tpo_admin"?`/tpo/job/${e==null?void 0:e.jobId}`:(t==null?void 0:t.role)==="management_admin"&&`/management/job/${e==null?void 0:e.jobId}`,target:"_blank",children:a.jsxs("div",{className:"py-1 h-fit",children:[e==null?void 0:e.jobTitle," at ",e==null?void 0:e.companyName,a.jsxs("span",{className:"mx-2 text-gray-500 hover:text-gray-600",children:["Status: ",(e==null?void 0:e.status.charAt(0).toUpperCase())+(e==null?void 0:e.status.slice(1))]})]},o)}))})]},r)})):a.jsx("div",{children:"No notices found!"})})})]})})}export{N};
