import{a as v,r as m,j as e,b as x,B as h}from"./index-BW9J8XDZ.js";import{G as A}from"./index-CJ7obRJ8.js";import{C as M}from"./Toast-B3EGjjVm.js";import{M as _}from"./Modal-C3czwkNW.js";import{a as i,F as g}from"./Form-B79OQcrp.js";import"./iconBase-URH_NpeO.js";import"./ThemeProvider-CkxvoxuK.js";import"./useTimeout-C4AjoZ0W.js";import"./TransitionWrapper-C8SpBI9G.js";import"./useEventCallback-Duh4GctK.js";import"./Button-DwHs9q8a.js";import"./Button-2RoaZ0va.js";import"./hasClass-Cxr2nBO8.js";import"./Col-ybKDMb82.js";function U(){document.title="CPMS | Add new user";const d=v().pathname.split("/").filter(t=>t!==""&&t!=="admin"&&t!=="management")[0].split("-").filter(t=>t!=="add"&&t!=="admin")[0],[s,l]=m.useState({first_name:"",email:"",number:""}),[n,p]=m.useState({}),[f,o]=m.useState(!1),[b,c]=m.useState(""),[j,r]=m.useState(!1),N=()=>r(!1),u=t=>l({...s,[t.target.name]:t.target.value}),w=t=>{t.preventDefault();let a={};if(s!=null&&s.first_name||(a.first_name="Name Required!"),s!=null&&s.email||(a.email="Email Required!"),s!=null&&s.number||(a.number="Number Required!"),Object.keys(a).length>0)return p(a);r(!0)},y=async()=>{var t;try{const a=await x.post(`${h}/management/add-management`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),o(!0),l({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddManagement.jsx ==> ",a)}r(!1)},S=async()=>{var t;try{const a=await x.post(`${h}/management/addtpo`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),o(!0),l({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddTPO.jsx ==> ",a)}r(!1)},C=async()=>{var t;try{const a=await x.post(`${h}/management/add-student`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),o(!0),l({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddStudent.jsx ==> ",a)}r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{show:f,onClose:()=>o(!1),message:b,delay:3e3,position:"top-center"}),e.jsx("div",{className:"flex justify-center items-center h-full max-md:h-fit text-base max-sm:text-sm",children:e.jsx("div",{className:"my-4 backdrop-blur-md bg-white/30 border border-white/20 rounded-lg p-8 shadow shadow-red-400 w-fit",children:e.jsxs(i,{onSubmit:w,className:"flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-x-3 gap-y-6 max-sm:grid-cols-1 max-sm:gap-x-1 max-sm:gap-y-1",children:[e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(i.Control,{type:"text",autoComplete:"name",placeholder:"Name",name:"first_name",value:s.first_name||"",onChange:u})}),e.jsx("span",{className:"text-red-500",children:n==null?void 0:n.first_name})]}),e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(i.Control,{type:"email",autoComplete:"email",placeholder:"Email",name:"email",value:s.email||"",onChange:u})}),e.jsx("span",{className:"text-red-500",children:n==null?void 0:n.email})]}),e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Number ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(i.Control,{type:"number",autoComplete:"number",placeholder:"Phone Number",name:"number",value:s.number||"",onInput:t=>{t.target.value.length>10&&(t.target.value=t.target.value.slice(0,10))},onChange:u})}),e.jsx("span",{className:"text-red-500",children:n==null?void 0:n.number})]})]}),e.jsxs("p",{className:"text-wrap",children:[e.jsx("span",{className:"text-red-500",children:"Note: "}),"Password will be randomly generated & send to user via mail."]})]}),e.jsxs("button",{type:"submit",className:"my-1 flex items-center px-3 py-2 bg-blue-500 text-white rounded",children:[e.jsx(A,{className:"mr-2 text-3xl max-sm:text-lg max-sm:mr-0.5"}),"Create New"]})]})})}),e.jsx(_,{show:j,close:N,header:"Confirmation",body:`Do you want to create new user and send email to ${s==null?void 0:s.email} about creation of user?`,btn:"Create",confirmAction:d==="management"?y:d==="tpo"?S:d==="student"?C:""})]})}export{U as default};
