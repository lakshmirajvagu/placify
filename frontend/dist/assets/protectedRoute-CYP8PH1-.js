import{f as u,a as f,u as m,r as s,j as a,h as c,O as p,N as g}from"./index-BW9J8XDZ.js";const h=({allowedRoles:r})=>{const{user:e,loading:o}=u(),i=f(),t=m(),[l,n]=s.useState(!0),d=()=>{if(!e)return a.jsx(g,{to:"/",state:{from:i},replace:!0});if(!r.includes(e.role)){e.role==="student"?t("/student/dashboard",{replace:!0}):e.role==="tpo_admin"?t("/tpo/dashboard"):e.role==="management_admin"?t("/management/dashboard",{replace:!0}):e.role==="superuser"?t("/admin/dashboard"):t("/404");return}n(!1)};return s.useEffect(()=>{d()},[o,t,e,r]),s.useEffect(()=>{if(e.isProfileCompleted==="false"){e.role==="student"&&t(`/student/complete-profile/${e.id}`),e.role==="tpo_admin"&&t(`/tpo/complete-profile/${e.id}`),e.role==="management_admin"&&t(`/management/complete-profile/${e.id}`);return}n(!1)},[]),a.jsx(a.Fragment,{children:o||l?a.jsx(c,{}):a.jsx(p,{})})};export{h as default};
