import{u as R,a as F,r as i,j as s,L as M,b as q,B as U}from"./index-BW9J8XDZ.js";import{C as A}from"./Toast-B3EGjjVm.js";import{i as T}from"./auth.utility-BSlGJMKu.js";import"./ThemeProvider-CkxvoxuK.js";import"./useTimeout-C4AjoZ0W.js";import"./TransitionWrapper-C8SpBI9G.js";import"./useEventCallback-Duh4GctK.js";function Z(){var g;document.title="CPMS | Student Sign Up";const r=R(),d=F(),b=((g=d==null?void 0:d.state)==null?void 0:g.prefillEmail)||"";i.useEffect(()=>{T()&&r("../student/dashboard")},[r]);const[N,m]=i.useState(!1),[j,h]=i.useState(""),[a,n]=i.useState({}),[e,y]=i.useState({first_name:"",email:b,number:"",password:""}),{first_name:v,number:C,email:S,password:P}=e,o=t=>{y({...e,[t.target.name]:t.target.value}),t.target.name==="first_name"&&n({...a,first_name:""}),t.target.name==="email"&&n({...a,email:""}),t.target.name==="number"&&n({...a,number:""}),t.target.name==="password"&&(n({...a,password:""}),x(t.target.value)||n({...a,password:"Password Must Contains: Minimum 8 Char with atleast 1 Special Char, 1 Number, 1 Uppercase, 1 Lowercase"}))};function x(t){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)}const E=async t=>{var c;if(t.preventDefault(),!(e!=null&&e.email)&&!(e!=null&&e.first_name)&&!(e!=null&&e.number)&&!(e!=null&&e.password))return n({email:"Email Required!",first_name:"Name Required!",number:"Number Required!",password:"Password Required!"});if(!(e!=null&&e.email)||!(e!=null&&e.first_name)||!(e!=null&&e.number)||!(e!=null&&e.password)){let l,p,w,f;e!=null&&e.email||(l="Email Required!"),e!=null&&e.first_name||(p="Name Required!"),e!=null&&e.number||(w="Number Required!"),e!=null&&e.password||(f="Password Required!"),n({email:l,first_name:p,number:w,password:f});return}if(!x(e==null?void 0:e.password))return n({password:"Password Must Contains: Minimum 8 Char with atleast 1 Special Char, 1 Number, 1 Uppercase, 1 Lowercase"});if(((c=e==null?void 0:e.number)==null?void 0:c.length)!==10)return n({...a,number:"Number Length Should be 10 digital only!"});try{const l=await q.post(`${U}/student/signup`,e);h("User Created Successfully! Now You Can Login."),m(!0),r("../student/login",{state:{showToastPass:!0,toastMessagePass:"User Created Successfully! Now You Can Login."}})}catch(l){l.response.data.msg&&(h(l.response.data.msg),m(!0)),console.log("Student Signup.jsx => ",l)}},[u,_]=i.useState(!1),L=()=>{_(!u)};return s.jsxs(s.Fragment,{children:[s.jsx(A,{show:N,onClose:()=>m(!1),message:j,delay:3e3,position:"bottom-end"}),s.jsx("div",{className:"flex justify-center items-center py-2 min-h-screen bg-gradient-to-r from-red-400 from-10% via-pink-300 via-40% to-purple-300 to-100% ",children:s.jsxs("form",{className:"form-signin flex justify-center items-center flex-col gap-3 backdrop-blur-md bg-white/30 border border-white/20 rounded-lg shadow shadow-red-400 p-8 w-1/3 max-lg:w-2/3 max-md:w-3/4 max-[400px]:w-4/5",onSubmit:E,children:[s.jsxs("div",{className:"flex justify-center items-center flex-col",children:[s.jsx("img",{className:"mb-4 rounded-xl shadow w-30 h-28 lg:w-40 lg:h-40",src:`${M}`,alt:"Logo Image"}),s.jsx("h1",{className:"h3 mb-3 font-weight-normal",children:"Sign Up as a Student"})]}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"inputName",className:"sr-only",children:"Name"}),s.jsx("input",{type:"text",id:"inputName",className:"form-control ml-1",placeholder:"Name",autoFocus:"",fdprocessedid:"gwlj3s",autoComplete:"Name",name:"first_name",value:v,onChange:o}),s.jsx("div",{className:"text-red-500 ml-2",children:s.jsx("span",{children:a==null?void 0:a.first_name})})]}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"inputEmail",className:"sr-only",children:"Email Address"}),s.jsx("input",{type:"email",id:"inputEmail",className:"form-control ml-1",placeholder:"Email Address",autoFocus:"",fdprocessedid:"gwlj3s",autoComplete:"email",name:"email",value:S,onChange:o}),s.jsx("div",{className:"text-red-500 ml-2",children:s.jsx("span",{children:a==null?void 0:a.email})})]}),s.jsxs("div",{className:"w-full",children:[s.jsx("label",{htmlFor:"inputNumber",className:"sr-only",children:"Phone Number"}),s.jsx("input",{type:"number",id:"inputNumber",className:"form-control ml-1",placeholder:"Phone Number",autoFocus:"",fdprocessedid:"gwlj3s",autoComplete:"number",name:"number",value:C,onChange:o,onInput:t=>{t.target.value>10&&(t.target.value=t.target.value.slice(0,10))}}),s.jsx("div",{className:"text-red-500 ml-2",children:s.jsx("span",{children:a==null?void 0:a.number})})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:"flex justify-center items-center w-full",children:[s.jsx("label",{htmlFor:"inputPassword",className:"sr-only",children:"Password"}),s.jsx("input",{type:`${u?"text":"password"}`,id:"inputPassword",className:"form-control",placeholder:"Password",fdprocessedid:"9sysne",autoComplete:"current-password",name:"password",value:P,onChange:o}),s.jsx("i",{className:`${u?"fa-solid fa-eye":"fa-regular fa-eye-slash"} -ml-6 cursor-pointer`,onClick:L})]}),s.jsx("div",{className:"text-red-500 ml-2",children:s.jsx("span",{children:a==null?void 0:a.password})})]}),s.jsx("div",{className:"flex justify-center items-center flex-col",children:s.jsx("button",{className:"btn btn-primary btn-block",type:"submit",children:"Sign Up"})}),s.jsxs("span",{className:"text-center",children:["Already having account?",s.jsx("span",{className:"text-blue-500 font-bold cursor-pointer px-1",onClick:()=>r("../student/login"),children:"Login"})]}),s.jsx("p",{className:"text-muted text-center text-gray-400",children:"Â© College Placement Management System 2024 - 25"})]})})]})}export{Z as default};
