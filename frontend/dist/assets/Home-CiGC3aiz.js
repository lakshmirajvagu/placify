import{r as a,b as l,B as c,j as t,c as f}from"./index-BW9J8XDZ.js";import{N as u}from"./NoticeBox-ffy0BLaZ.js";import{B as p}from"./Badge-DWmDE_gp.js";import"./ThemeProvider-CkxvoxuK.js";function g(){const[o,d]=a.useState(!0),[r,m]=a.useState([]),[n,h]=a.useState({});a.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token"),i=await l.get(`${c}/user/detail`,{headers:{Authorization:`Bearer ${s}`}});h({role:i.data.role})}catch(s){console.log("Error fetching user details => ",s)}})()},[]),a.useEffect(()=>{x()},[n==null?void 0:n.role]);const x=async()=>{try{const e=await l.get(`${c}/tpo/jobs`);m(e.data.data.sort((s,i)=>new Date(i.postedAt)-new Date(s.postedAt)).slice(0,10))}catch(e){console.log("Error while fetching notices => ",e)}finally{d(!1)}};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"my-2 mx-2 w-full backdrop-blur-md bg-white/30 border border-white/20 rounded-lg py-2 px-3 shadow shadow-red-400",children:[t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h3",{className:"font-semibold my-2",children:"Notification"})}),o?t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("i",{className:"fa-solid fa-spinner fa-spin text-2xl"})}):t.jsx("div",{className:"relative h-72 overflow-hidden",children:t.jsx("div",{className:"absolute bottom-0 w-full h-full animate-scrollUp",children:(r==null?void 0:r.length)>0?r.map((e,s)=>t.jsxs("div",{className:"py-2 h-fit",children:[t.jsxs(f,{className:"text-blue-500 hover:text-blue-700",to:`/student/job/${e==null?void 0:e._id}`,target:"_blank",children:[e==null?void 0:e.jobTitle,(new Date-new Date(e==null?void 0:e.postedAt))/(1e3*60*60*24)<=2&&t.jsx(p,{className:"mx-2",bg:"primary",children:"New"})]}),t.jsx("span",{className:"no-underline mx-1 text-gray-400",children:new Date(e==null?void 0:e.postedAt).toLocaleDateString("en-IN")+" "+new Date(e==null?void 0:e.postedAt).toLocaleTimeString("en-IN")})]},s)):t.jsx("div",{children:"No notices found!"})})})]})})}function S(){return document.title="CPMS | Student Dashboard",t.jsx(t.Fragment,{children:t.jsxs("div",{className:"grid grid-cols-2 gap-2 max-sm:grid-cols-1",children:[t.jsx(g,{}),t.jsx(u,{})]})})}export{S as default};
